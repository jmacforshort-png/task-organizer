<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr. Mac's Task Organizer</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="auth-modal" id="auth-modal" aria-hidden="true">
    <div class="auth-card" role="dialog" aria-modal="true" aria-labelledby="auth-title">
      <h2 id="auth-title">Enter Password</h2>
      <p>This is a lightweight lock for quick privacy.</p>
      <form id="auth-form" class="auth-form">
        <label for="auth-password">Password</label>
        <input id="auth-password" name="password" type="password" autocomplete="current-password" />
        <button class="btn primary" type="submit">Unlock</button>
        <div class="auth-error" id="auth-error" role="alert" aria-live="polite"></div>
      </form>
    </div>
  </div>

  <div class="app">
    <div class="sync-alert" id="sync-alert" aria-live="polite" hidden>
      <span class="sync-alert-text" id="sync-alert-text">Out of sync</span>
      <div class="sync-alert-actions">
        <button class="btn ghost tiny" id="sync-open-cloud" type="button">Sign in to sync</button>
        <button class="icon-btn" id="sync-close" type="button">Close</button>
      </div>
    </div>
    <header class="topbar">
      <div class="brand">
        <div class="logo">TO</div>
        <div>
          <h1>Mr. Mac's Task Organizer</h1>
          <p>Your schedule centered, tasks around it.</p>
        </div>
      </div>
      <div class="top-actions">
        <button class="btn primary" id="open-modal">Add a To-Do</button>
        <button class="btn ghost" id="open-completed">Completed List</button>
        <button class="btn danger" id="toggle-tasks">Hide Tasks</button>
        <a class="btn tracker" href="https://weekly-checkin-tracker.onrender.com/" target="_blank" rel="noopener">Weekly Check-in Tracker</a>
        <div class="btn-stack">
          <a class="btn portal" href="https://ljcds.myschoolapp.com/app/faculty?svcid=edu#login" target="_blank" rel="noopener">Portal</a>
          <a class="btn gmail" href="https://mail.google.com/" target="_blank" rel="noopener">Gmail</a>
        </div>
        <div class="btn-stack">
          <a class="btn syllabus7" href="https://docs.google.com/document/d/1Not3sOawmX7qjIBp528UUCVINxCMOar1kHcRQXED-_s/edit?tab=t.0" target="_blank" rel="noopener">7th</a>
          <a class="btn syllabus8" href="https://docs.google.com/document/d/1W3_hI0Swg_rlF-vmgUPIRZGQd3HuqDilYEmPYYB3ehw/edit?tab=t.0" target="_blank" rel="noopener">8th</a>
        </div>
        <div class="btn-stack">
          <a class="btn formative" href="https://app.formative.com/?_gl=1*1mdh6k9*_ga*MTg1MzgzMzQwNC4xNzU3MzYzMDgx*_ga_HDL3YFCDHB*czE3NTc0NDIzMTEkbzEkZzAkdDE3NTc0NDIzMTEkajYwJGwwJGgw*_gcl_au*MTIxNTkzMjc0Mi4xNzU3NDQyMzEx" target="_blank" rel="noopener">Formative</a>
          <a class="btn slides" href="https://docs.google.com/presentation/d/1TFLPzHoxeQ-UomsQxWV3DWp_McjuNln_OKJJyKPBRFA/edit?slide=id.g3a335a89885_0_0#slide=id.g3a335a89885_0_0" target="_blank" rel="noopener">Advisory Slides</a>
        </div>
        <aside class="next-up-card" id="next-up-card" aria-live="polite">
          <div class="next-up-header">
            <h3>Next Up</h3>
            <span id="live-clock">--:--</span>
          </div>
          <div class="next-up-list" id="next-up-list"></div>
        </aside>
        <div class="stats" id="stats">0 total • 0 done</div>
      </div>
    </header>

    <section class="card">
      

      <div class="orbit" id="orbit">
        <div class="orbit-tasks" id="orbit-tasks"></div>

        <main class="schedule" id="schedule">
          <div class="schedule-card">
            <div class="schedule-frame">
              <button class="weekend-toggle sunday" id="open-sunday" type="button">Sunday</button>
              <div class="schedule-header">
                <div class="day-label" data-day-key="monday">Monday <span class="day-date" data-day-date="monday"></span></div>
                <div class="day-label" data-day-key="tuesday">Tuesday <span class="day-date" data-day-date="tuesday"></span></div>
                <div class="day-label" data-day-key="wednesday">Wednesday <span class="day-date" data-day-date="wednesday"></span></div>
                <div class="day-label" data-day-key="thursday">Thursday <span class="day-date" data-day-date="thursday"></span></div>
                <div class="day-label" data-day-key="friday">Friday <span class="day-date" data-day-date="friday"></span></div>
              </div>
              <button class="weekend-toggle saturday" id="open-saturday" type="button">Saturday</button>
            </div>
            <div class="schedule-grid">
              <div class="day-col">
                <div class="slot surf" data-slot-id="xday-surf" data-slot-label="X Day • Surf" style="--start:0; --end:75;">Surf<br>6:00–7:15</div>
                <div class="slot office" data-slot-id="xday-office" data-slot-label="X Day • Office Hours" style="--start:110; --end:140;">Office Hours<br>7:50–8:20</div>
                <div class="slot blue" data-slot-id="xday-1-8" data-slot-label="X Day • 1 / 8" style="--start:145; --end:190;">1 / 8<br>8:25–9:10</div>
                <div class="slot yellow" data-slot-id="xday-2" data-slot-label="X Day • 2" style="--start:195; --end:245;">2<br>9:15–10:05</div>
                <div class="slot duty" data-slot-id="xday-duty-1" data-slot-label="X Day • Duty" style="--start:245; --end:260;">Duty<br>10:05–10:20</div>
                <div class="slot pink" data-slot-id="xday-3-8" data-slot-label="X Day • 3 / 8" style="--start:260; --end:305;">3 / 8<br>10:20–11:05</div>
                <div class="slot lunch" data-slot-id="xday-lunch" data-slot-label="X Day • Lunch" style="--start:305; --end:345;">Lunch<br>11:05–11:45</div>
                <div class="slot purple" data-slot-id="xday-4-7" data-slot-label="X Day • 4 / 7" style="--start:345; --end:390;">4 / 7<br>11:45–12:30</div>
                <div class="slot salmon" data-slot-id="xday-5" data-slot-label="X Day • 5" style="--start:390; --end:440;">5<br>12:30–1:20</div>
                <div class="slot duty" data-slot-id="xday-duty-2" data-slot-label="X Day • Duty" style="--start:440; --end:450;">Duty<br>1:20–1:30</div>
                <div class="slot green" data-slot-id="xday-6-7" data-slot-label="X Day • 6 / 7" style="--start:450; --end:495;">6 / 7<br>1:30–2:15</div>
                <div class="slot note" data-slot-id="xday-gym-pe" data-slot-label="X Day • Last Block" style="--start:500; --end:555;">2:20–3:15</div>
              </div>
              <div class="day-col">
                <div class="slot surf" data-slot-id="day1-surf" data-slot-label="Day 1 • Surf" style="--start:0; --end:75;">Surf<br>6:00–7:15</div>
                <div class="slot office" data-slot-id="day1-office" data-slot-label="Day 1 • Office Hours" style="--start:110; --end:140;">Office Hours<br>7:50–8:20</div>
                <div class="slot blue" data-slot-id="day1-1-8" data-slot-label="Day 1 • 1 / 8" style="--start:145; --end:225;">1 / 8<br>8:25–9:45</div>
                <div class="slot pink" data-slot-id="day1-3-8" data-slot-label="Day 1 • 3 / 8" style="--start:240; --end:320;">3 / 8<br>10:00–11:20</div>
                <div class="slot tan" data-slot-id="day1-studyhall" data-slot-label="Day 1 • Study Hall" style="--start:330; --end:370;">Study Hall<br>11:30–12:10</div>
                <div class="slot lunch" data-slot-id="day1-lunch" data-slot-label="Day 1 • Lunch" style="--start:370; --end:410;">Lunch<br>12:10–12:50</div>
                <div class="slot salmon" data-slot-id="day1-gym-5" data-slot-label="Day 1 • 5" style="--start:410; --end:490;">5<br>12:50–2:10</div>
                <div class="slot note" data-slot-id="day1-meeting" data-slot-label="Day 1 • Seventh Meeting" style="--start:495; --end:555;">Seventh meeting<br>2:15–3:15</div>
              </div>
              <div class="day-col">
                <div class="slot surf" data-slot-id="day2-surf" data-slot-label="Day 2 • Surf" style="--start:0; --end:75;">Surf<br>6:00–7:15</div>
                <div class="slot office" data-slot-id="day2-office" data-slot-label="Day 2 • Office Hours" style="--start:110; --end:140;">Office Hours<br>7:50–8:20</div>
                <div class="slot yellow" data-slot-id="day2-gym-2" data-slot-label="Day 2 • 2" style="--start:145; --end:225;">2<br>8:25–9:45</div>
                <div class="slot purple" data-slot-id="day2-4-7" data-slot-label="Day 2 • 4 / 7" style="--start:240; --end:320;">4 / 7<br>10:00–11:20</div>
                <div class="slot tan" data-slot-id="day2-fhao" data-slot-label="Day 2 • FHAO" style="--start:330; --end:370;">FHAO<br>11:30–12:10</div>
                <div class="slot lunch" data-slot-id="day2-lunch" data-slot-label="Day 2 • Lunch" style="--start:370; --end:410;">Lunch<br>12:10–12:50</div>
                <div class="slot green" data-slot-id="day2-6-7" data-slot-label="Day 2 • 6 / 7" style="--start:410; --end:490;">6 / 7<br>12:50–2:10</div>
                <div class="slot note" data-slot-id="day2-gym-pe" data-slot-label="Day 2 • Last Block" style="--start:495; --end:555;">2:15–3:15</div>
              </div>
              <div class="day-col">
                <div class="slot surf" data-slot-id="day3-surf" data-slot-label="Day 3 • Surf" style="--start:0; --end:75;">Surf<br>6:00–7:15</div>
                <div class="slot office" data-slot-id="day3-office" data-slot-label="Day 3 • Office Hours" style="--start:110; --end:140;">Office Hours<br>7:50–8:20</div>
                <div class="slot pink" data-slot-id="day3-3-8" data-slot-label="Day 3 • 3 / 8" style="--start:145; --end:225;">3 / 8<br>8:25–9:45</div>
                <div class="slot blue" data-slot-id="day3-1-8" data-slot-label="Day 3 • 1 / 8" style="--start:240; --end:320;">1 / 8<br>10:00–11:20</div>
                <div class="slot tan" data-slot-id="day3-studyhall" data-slot-label="Day 3 • Study Hall" style="--start:330; --end:370;">Study Hall<br>11:30–12:10</div>
                <div class="slot lunch" data-slot-id="day3-lunch" data-slot-label="Day 3 • Lunch" style="--start:370; --end:410;">Lunch<br>12:10–12:50</div>
                <div class="slot salmon" data-slot-id="day3-gym-5" data-slot-label="Day 3 • 5" style="--start:410; --end:490;">5<br>12:50–2:10</div>
                <div class="slot note" data-slot-id="day3-meeting" data-slot-label="Day 3 • Eighth Meeting" style="--start:495; --end:555;">Eighth meeting<br>2:15–3:15</div>
              </div>
              <div class="day-col">
                <div class="slot surf" data-slot-id="day4-surf" data-slot-label="Day 4 • Surf" style="--start:0; --end:75;">Surf<br>6:00–7:15</div>
                <div class="slot office" data-slot-id="day4-office" data-slot-label="Day 4 • Office Hours" style="--start:110; --end:140;">Office Hours<br>7:50–8:20</div>
                <div class="slot purple" data-slot-id="day4-4-7" data-slot-label="Day 4 • 4 / 7" style="--start:145; --end:225;">4 / 7<br>8:25–9:45</div>
                <div class="slot yellow" data-slot-id="day4-gym-2" data-slot-label="Day 4 • 2" style="--start:240; --end:320;">2<br>10:00–11:20</div>
                <div class="slot tan" data-slot-id="day4-studyhall" data-slot-label="Day 4 • Study Hall" style="--start:330; --end:370;">Study Hall<br>11:30–12:10</div>
                <div class="slot lunch" data-slot-id="day4-lunch" data-slot-label="Day 4 • Lunch" style="--start:370; --end:410;">Lunch<br>12:10–12:50</div>
                <div class="slot green" data-slot-id="day4-6-7" data-slot-label="Day 4 • 6 / 7" style="--start:410; --end:490;">6 / 7<br>12:50–2:10</div>
                <div class="slot note" data-slot-id="day4-gym-pe" data-slot-label="Day 4 • Last Block" style="--start:495; --end:555;">2:15–3:15</div>
              </div>
            </div>
          </div>
        </main>
        <section class="weekend-planner" id="weekend-planner" aria-hidden="true">
          <div class="weekend-header">
            <h3 id="weekend-title">Weekend Planner</h3>
            <button class="btn ghost tiny" id="hide-weekend" type="button">Hide</button>
          </div>
          <div class="weekend-date" id="weekend-date"></div>
          <div class="weekend-hours" id="weekend-hours"></div>
        </section>
      </div>

      <div class="legend">
        <div class="legend-item"><span class="legend-dot today"></span>Today</div>
        <div class="legend-item"><span class="legend-dot tomorrow"></span>Tomorrow</div>
        <div class="legend-item"><span class="legend-dot endweek"></span>End of the week</div>
        <div class="legend-item"><span class="legend-dot nextmonth"></span>Next month</div>
        <div class="legend-item"><span class="legend-dot wayout"></span>Way out</div>
      </div>

      <div id="empty" class="empty">No tasks yet. Add your first one above.</div>
    

      <div class="toolbar">
        <div class="group">
          <label for="filter">Status</label>
          <select id="filter">
            <option value="all">All</option>
            <option value="active" selected>Active</option>
            <option value="done">Completed</option>
          </select>
        </div>
        <div class="group">
          <label for="timeframe-filter">Timeframe</label>
          <select id="timeframe-filter">
            <option value="all">All</option>
            <option value="Today">Today</option>
            <option value="Tomorrow">Tomorrow</option>
            <option value="End of the week">End of the week</option>
            <option value="Next month">Next month</option>
            <option value="Way out">Way out</option>
          </select>
        </div>
        <div class="group">
          <label for="category-filter">Category</label>
          <select id="category-filter">
            <option value="all">All</option>
            <option value="Chores">Chores</option>
            <option value="Sonja">Sonja</option>
            <option value="Grading">Grading</option>
            <option value="Lab supplies">Lab supplies</option>
            <option value="Grades/Comments">Grades/Comments</option>
            <option value="Exercise">Exercise</option>
            <option value="Finance">Finance</option>
            <option value="Health">Health</option>
            <option value="Personal">Personal</option>
            <option value="Work">Work</option>
            <option value="Trips">Trips</option>
            <option value="Family">Family</option>
          </select>
        </div>
        <div class="group">
          <label for="search">Search</label>
          <input id="search" type="text" placeholder="Find a task..." />
        </div>
      </div>
</section>

    <section class="card sticky-card">
      <div class="sticky-header">
        <div>
          <h2>Sticky Notes</h2>
          <p>Quick notes and links pinned below.</p>
        </div>
        <button class="btn ghost" id="open-sticky">Add Sticky Note</button>
      </div>
      <div class="sticky-grid" id="sticky-grid"></div>
      <div class="sticky-empty" id="sticky-empty">No sticky notes yet.</div>
    </section>

    <footer class="footer">
      <div class="auth-bar">
        <span class="auth-status" id="cloud-status">Cloud Sync: Not connected</span>
        <button class="btn ghost small" id="open-cloud">Cloud Sync</button>
      </div>
      Stored locally in your browser. No account needed.
    </footer>
  </div>

  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2 id="modal-title">Add a To-Do</h2>
        <button class="icon-btn" id="close-modal">Close</button>
      </div>
      <form id="task-form" class="form">
        <input type="hidden" id="task-id" name="taskId" />

        <div class="field span-2">
          <label for="title">Task</label>
          <input id="title" name="title" type="text" placeholder="e.g., Order lab supplies" required />
        </div>

        <div class="field">
          <label for="timeframe">Timeframe</label>
          <select id="timeframe" name="timeframe">
            <option value="Today">Today</option>
            <option value="Tomorrow">Tomorrow</option>
            <option value="End of the week">End of the week</option>
            <option value="Next month">Next month</option>
            <option value="Way out">Way out</option>
          </select>
        </div>


        <div class="field">
          <label for="category">Category</label>
          <select id="category" name="category">
            <option value="Chores">Chores</option>
            <option value="Sonja">Sonja</option>
            <option value="Grading">Grading</option>
            <option value="Lab supplies">Lab supplies</option>
            <option value="Grades/Comments">Grades/Comments</option>
            <option value="Exercise">Exercise</option>
            <option value="Finance">Finance</option>
            <option value="Health">Health</option>
            <option value="Personal">Personal</option>
            <option value="Work">Work</option>
            <option value="Trips">Trips</option>
            <option value="Family">Family</option>
          </select>
        </div>

        <div class="field span-2">
          <label for="notes">Notes (optional)</label>
          <input id="notes" name="notes" type="text" placeholder="Any extra detail..." />
        </div>

        <div class="actions span-2">
          <button class="btn primary" type="submit" id="save-task">Save Task</button>
          <button class="btn ghost" type="button" id="clear-completed">Clear Completed</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="note-modal" aria-hidden="true">
    <div class="modal-card note-card">
      <div class="modal-header">
        <h2>Schedule Note</h2>
        <button class="icon-btn" id="close-note-modal">Cancel</button>
      </div>
      <form id="note-form" class="form note-form">
        <input type="hidden" id="note-slot-id" />
        <div class="field span-2">
          <label for="note-title">Title</label>
          <input id="note-title" class="note-title" placeholder="e.g., Lesson 3: Photosynthesis" />
        </div>
        <div class="field span-2">
          <label for="block-task-input">Add Block To-Do</label>
          <div class="task-inline">
            <input id="block-task-input" placeholder="Type a to-do..." />
            <button class="btn ghost tiny" id="add-block-task" type="button">Add</button>
          </div>
        </div>
        <div class="field span-2">
          <label>Block To-Dos</label>
          <div class="block-task-list" id="block-task-list"></div>
        </div>
        <div class="field span-2">
          <label for="note-text">Notes / reminders / links</label>
          <textarea id="note-text" class="note-text" placeholder="Type here..."></textarea>
        </div>
        <div class="actions span-2">
          <button class="btn primary" type="submit">Save Note</button>
          <button class="btn ghost" type="button" id="cancel-note">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="note-view-modal" aria-hidden="true">
    <div class="modal-card note-view-card">
      <div class="modal-header">
        <h2 id="note-view-title">Note</h2>
        <button class="icon-btn" id="close-note-view">X</button>
      </div>
      <div class="note-view-body" id="note-view-body"></div>
      <div class="actions">
        <button class="btn danger" type="button" id="note-view-delete">Delete</button>
        <button class="btn ghost" type="button" id="note-view-edit">Edit</button>
      </div>
    </div>
  </div>

  <div class="modal" id="completed-modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2>Completed Tasks</h2>
        <button class="icon-btn" id="close-completed">Close</button>
      </div>
      <div class="completed-list" id="completed-list"></div>
    </div>
  </div>

  <div class="modal" id="sticky-modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2 id="sticky-modal-title">Add Sticky Note</h2>
        <button class="icon-btn" id="close-sticky">Close</button>
      </div>
      <form id="sticky-form" class="form">
        <input type="hidden" id="sticky-id" name="stickyId" />
        <div class="field span-2">
          <label for="sticky-title">Title</label>
          <input id="sticky-title" name="title" type="text" placeholder="e.g., Field Trip Links" required />
        </div>
        <div class="field span-2">
          <label for="sticky-body">Notes / links</label>
          <textarea id="sticky-body" name="body" class="sticky-body" placeholder="Paste links or write notes..."></textarea>
        </div>
        <div class="actions span-2">
          <button class="btn primary" type="submit" id="save-sticky">Save Note</button>
          <button class="btn ghost" type="button" id="cancel-sticky">Cancel</button>
        </div>
      </form>
    </div>
  </div>

    <div class="modal" id="date-modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2 id="date-modal-title">Set Date</h2>
        <button class="icon-btn" id="close-date-modal">Close</button>
      </div>
      <form id="date-form" class="form">
        <input type="hidden" id="date-day-key" />
        <div class="field span-2">
          <label for="day-date-input">Date</label>
          <input id="day-date-input" type="date" required />
        </div>
        <div class="actions span-2">
          <button class="btn primary" type="submit">Save Date</button>
          <button class="btn ghost" type="button" id="clear-date">Clear</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" id="cloud-modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2>Cloud Sync</h2>
        <button class="icon-btn" id="close-cloud">Close</button>
      </div>
      <form id="cloud-form" class="form">
        <div class="field span-2">
          <label for="cloud-email">Email</label>
          <input id="cloud-email" name="email" type="email" autocomplete="email" required />
        </div>
        <div class="field span-2">
          <label for="cloud-password">Password</label>
          <input id="cloud-password" name="password" type="password" autocomplete="current-password" required />
        </div>
        <div class="actions span-2">
          <button class="btn primary" type="submit">Sign In</button>
          <button class="btn ghost" type="button" id="cloud-signup">Create Account</button>
          <button class="btn ghost" type="button" id="cloud-signout">Sign Out</button>
        </div>
        <div class="cloud-status" id="cloud-feedback" role="alert" aria-live="polite"></div>
      </form>
    </div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>
</body>
</html>
